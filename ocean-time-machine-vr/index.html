<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ocean Time Machine VR | NASA Earth Observations</title>
    <meta name="description" content="Immersive WebXR experience exploring ocean changes from 2000 to 2050 using NASA data">
    
    <!-- A-Frame VR Framework -->
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    
    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-content">
            <div class="ocean-wave"></div>
            <h1>ðŸŒŠ Ocean Time Machine</h1>
            <p>Initializing Earth observation system...</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>
    </div>

    <!-- VR Scene Container -->
    <a-scene 
        id="vr-scene"
        loading-screen="enabled: false"
        vr-mode-ui="enabled: true"
        renderer="antialias: true; colorManagement: true; sortObjects: true;"
        background="color: #000000"
        stats="false">
        
        <!-- Asset Management System -->
        <a-assets timeout="5000">
            <!-- Audio -->
            <audio id="audio-ambient" src="assets/audio/scene-2000-calm.mp3" preload="auto" loop></audio>
            <audio id="audio-narration-2000" src="assets/audio/narration-2000.mp3" preload="auto"></audio>
            <audio id="audio-narration-2010" src="assets/audio/narration-2010.mp3" preload="auto"></audio>
            <audio id="audio-narration-2020" src="assets/audio/narration-2020.mp3" preload="auto"></audio>
            <audio id="audio-click" src="assets/audio/transition.mp3" preload="auto"></audio>
        </a-assets>

        <!-- Camera Rig -->
        <a-entity id="camera-rig" position="0 0 0">
            <a-camera id="main-camera" 
                      position="0 0 8"
                      look-controls="reverseMouseDrag: true"
                      wasd-controls="enabled: false">
                <!-- Gaze Cursor -->
                <a-cursor 
                    id="gaze-cursor"
                    color="#00D9FF"
                    opacity="0.9"
                    scale="0.3 0.3 0.3"
                    fuse="true"
                    fuse-timeout="1500"
                    raycaster="objects: .interactive, .year-button, .hotspot">
                </a-cursor>
            </a-camera>
        </a-entity>

        <!-- Stars Background -->
        <a-entity id="stars">
            <a-sphere radius="100" material="shader: flat; side: back; color: #000000; opacity: 1"></a-sphere>
            <!-- Star particles -->
            <a-entity id="star-field" position="0 0 0"></a-entity>
        </a-entity>

        <!-- Main Earth Entity (User can rotate manually) -->
        <a-entity id="earth-container" position="0 0 0">
            
            <!-- EARTH SPHERE - Year 2000 -->
            <a-sphere 
                id="earth-2000"
                radius="3"
                position="0 0 0"
                material="shader: standard; color: #2E7D9A; roughness: 0.8; metalness: 0.2"
                visible="true"
                shadow="cast: true">
            </a-sphere>

            <!-- EARTH SPHERE - Year 2010 -->
            <a-sphere 
                id="earth-2010"
                radius="3"
                position="0 0 0"
                material="shader: standard; color: #D4894A; roughness: 0.8; metalness: 0.2"
                visible="false"
                shadow="cast: true">
            </a-sphere>

            <!-- EARTH SPHERE - Year 2020 -->
            <a-sphere 
                id="earth-2020"
                radius="3"
                position="0 0 0"
                material="shader: standard; color: #C94A3D; roughness: 0.8; metalness: 0.2"
                visible="false"
                shadow="cast: true">
            </a-sphere>

            <!-- EARTH SPHERE - Year 2050 Projection -->
            <a-sphere 
                id="earth-2050"
                radius="3"
                position="0 0 0"
                material="shader: standard; color: #8B1A1A; roughness: 0.8; metalness: 0.2"
                visible="false"
                shadow="cast: true">
            </a-sphere>

            <!-- Atmosphere Glow -->
            <a-sphere 
                id="atmosphere"
                radius="3.15"
                position="0 0 0"
                material="shader: flat; color: #4d9de0; opacity: 0.3; transparent: true; side: back">
            </a-sphere>
        </a-entity>

        <!-- Interactive Hotspots -->
        <!-- Arctic Ice Hotspot -->
        <a-sphere 
            id="hotspot-arctic"
            class="interactive hotspot"
            position="0 2.8 0.8"
            radius="0.15"
            color="#FF0000"
            material="shader: flat; opacity: 0.8; transparent: true"
            animation="property: scale; to: 1.3 1.3 1.3; dur: 1000; loop: true; dir: alternate; easing: easeInOutSine"
            data-info="Arctic sea ice has declined by 13% per decade since 2000">
        </a-sphere>

        <!-- Ocean Warming Hotspot -->
        <a-sphere 
            id="hotspot-pacific"
            class="interactive hotspot"
            position="-2.5 0 1.5"
            radius="0.15"
            color="#FF6B00"
            material="shader: flat; opacity: 0.8; transparent: true"
            animation="property: scale; to: 1.3 1.3 1.3; dur: 1000; loop: true; dir: alternate; easing: easeInOutSine"
            data-info="Pacific Ocean temperatures increased 0.7Â°C since 2000">
        </a-sphere>

        <!-- Coral Bleaching Hotspot -->
        <a-sphere 
            id="hotspot-coral"
            class="interactive hotspot"
            position="2.2 -0.8 1.8"
            radius="0.15"
            color="#FFD93D"
            material="shader: flat; opacity: 0.8; transparent: true"
            animation="property: scale; to: 1.3 1.3 1.3; dur: 1000; loop: true; dir: alternate; easing: easeInOutSine"
            data-info="Great Barrier Reef lost 50% of coral since 2000">
        </a-sphere>

        <!-- Sea Level Rise Hotspot -->
        <a-sphere 
            id="hotspot-coastal"
            class="interactive hotspot"
            position="1.8 -1.5 1.5"
            radius="0.15"
            color="#9C27B0"
            material="shader: flat; opacity: 0.8; transparent: true"
            animation="property: scale; to: 1.3 1.3 1.3; dur: 1000; loop: true; dir: alternate; easing: easeInOutSine"
            data-info="Global sea level rose 9cm affecting coastal regions">
        </a-sphere>

        <!-- Data Panel (Left) -->
        <a-entity id="data-panel-left" position="-5 0 0" rotation="0 30 0">
            <a-plane 
                color="#001133"
                width="2.5"
                height="3"
                material="shader: flat; opacity: 0.9; transparent: true; side: double">
            </a-plane>
            <a-text 
                id="data-text-left"
                value="YEAR 2000\n\nOcean Health: GOOD\nGlobal Temp: Baseline\nSea Level: Baseline\n\nNASA MODIS\nOcean Color Data"
                align="center"
                position="0 0 0.02"
                width="2.3"
                color="#00D9FF"
                wrap-count="20">
            </a-text>
        </a-entity>

        <!-- Data Panel (Right) -->
        <a-entity id="data-panel-right" position="5 0 0" rotation="0 -30 0">
            <a-plane 
                color="#001133"
                width="2.5"
                height="3"
                material="shader: flat; opacity: 0.9; transparent: true; side: double">
            </a-plane>
            <a-text 
                id="data-text-right"
                value="OBSERVATIONS\n\nâ€¢ Healthy coral reefs\nâ€¢ Stable ice coverage\nâ€¢ Rich biodiversity\nâ€¢ Baseline conditions"
                align="left"
                position="-1 0 0.02"
                width="2.3"
                color="#FFFFFF"
                wrap-count="22">
            </a-text>
        </a-entity>

        <!-- Popup Info Box (Hidden by default) -->
        <a-entity id="info-popup" position="0 -2 3" visible="false">
            <a-plane 
                color="#000000"
                width="4"
                height="1.5"
                material="shader: flat; opacity: 0.95; transparent: true; side: double">
            </a-plane>
            <a-text 
                id="info-popup-text"
                value="Click a glowing hotspot to learn more"
                align="center"
                position="0 0 0.02"
                width="3.8"
                color="#00D9FF"
                wrap-count="40">
            </a-text>
            <!-- Close button -->
            <a-plane 
                id="close-popup"
                class="interactive"
                position="1.7 0.6 0.01"
                width="0.4"
                height="0.4"
                color="#FF0000"
                material="shader: flat">
                <a-text 
                    value="X"
                    align="center"
                    position="0 0 0.01"
                    width="0.8"
                    color="#FFFFFF">
                </a-text>
            </a-plane>
        </a-entity>

        <!-- Timeline Control UI (Bottom) -->
        <a-entity id="timeline-ui" position="0 -3 2">
            <!-- Background panel -->
            <a-plane 
                color="#001133"
                width="8"
                height="1"
                material="shader: flat; opacity: 0.9; transparent: true">
            </a-plane>
            
            <!-- Year buttons -->
            <a-entity position="-3 0 0.02">
                <a-plane 
                    id="btn-2000"
                    class="interactive year-button active-year"
                    width="1.5"
                    height="0.6"
                    color="#00D9FF"
                    material="shader: flat; opacity: 0.9">
                    <a-animation 
                        attribute="scale"
                        begin="mouseenter"
                        to="1.1 1.1 1"
                        dur="200">
                    </a-animation>
                    <a-animation 
                        attribute="scale"
                        begin="mouseleave"
                        to="1 1 1"
                        dur="200">
                    </a-animation>
                </a-plane>
                <a-text 
                    value="2000"
                    align="center"
                    position="0 0 0.01"
                    width="2.5"
                    color="#FFFFFF">
                </a-text>
            </a-entity>

            <a-entity position="-1 0 0.02">
                <a-plane 
                    id="btn-2010"
                    class="interactive year-button"
                    width="1.5"
                    height="0.6"
                    color="#003366"
                    material="shader: flat; opacity: 0.9">
                    <a-animation 
                        attribute="scale"
                        begin="mouseenter"
                        to="1.1 1.1 1"
                        dur="200">
                    </a-animation>
                    <a-animation 
                        attribute="scale"
                        begin="mouseleave"
                        to="1 1 1"
                        dur="200">
                    </a-animation>
                </a-plane>
                <a-text 
                    value="2010"
                    align="center"
                    position="0 0 0.01"
                    width="2.5"
                    color="#FFFFFF">
                </a-text>
            </a-entity>

            <a-entity position="1 0 0.02">
                <a-plane 
                    id="btn-2020"
                    class="interactive year-button"
                    width="1.5"
                    height="0.6"
                    color="#003366"
                    material="shader: flat; opacity: 0.9">
                    <a-animation 
                        attribute="scale"
                        begin="mouseenter"
                        to="1.1 1.1 1"
                        dur="200">
                    </a-animation>
                    <a-animation 
                        attribute="scale"
                        begin="mouseleave"
                        to="1 1 1"
                        dur="200">
                    </a-animation>
                </a-plane>
                <a-text 
                    value="2020"
                    align="center"
                    position="0 0 0.01"
                    width="2.5"
                    color="#FFFFFF">
                </a-text>
            </a-entity>

            <a-entity position="3 0 0.02">
                <a-plane 
                    id="btn-2050"
                    class="interactive year-button"
                    width="1.5"
                    height="0.6"
                    color="#003366"
                    material="shader: flat; opacity: 0.9">
                    <a-animation 
                        attribute="scale"
                        begin="mouseenter"
                        to="1.1 1.1 1"
                        dur="200">
                    </a-animation>
                    <a-animation 
                        attribute="scale"
                        begin="mouseleave"
                        to="1 1 1"
                        dur="200">
                    </a-animation>
                </a-plane>
                <a-text 
                    value="2050"
                    align="center"
                    position="0 0 0.01"
                    width="2.5"
                    color="#FFFFFF">
                </a-text>
            </a-entity>

            <!-- Auto-play toggle -->
            <a-entity position="0 -0.6 0.02">
                <a-plane 
                    id="btn-autoplay"
                    class="interactive"
                    width="2"
                    height="0.5"
                    color="#4CAF50"
                    material="shader: flat; opacity: 0.9">
                    <a-animation 
                        attribute="scale"
                        begin="mouseenter"
                        to="1.1 1.1 1"
                        dur="200">
                    </a-animation>
                    <a-animation 
                        attribute="scale"
                        begin="mouseleave"
                        to="1 1 1"
                        dur="200">
                    </a-animation>
                </a-plane>
                <a-text 
                    id="autoplay-text"
                    value="AUTO-PLAY ON"
                    align="center"
                    position="0 0 0.01"
                    width="3"
                    color="#FFFFFF">
                </a-text>
            </a-entity>
        </a-entity>

        <!-- Lighting -->
        <a-entity light="type: ambient; color: #222244; intensity: 0.5"></a-entity>
        <a-entity light="type: directional; color: #FFFFFF; intensity: 1.2" position="5 3 10"></a-entity>

        <!-- Fade Overlay -->
        <a-plane 
            id="fade-overlay"
            position="0 0 -0.5"
            width="20"
            height="20"
            material="shader: flat; color: #000000; opacity: 0; transparent: true"
            visible="false">
        </a-plane>
    </a-scene>

    <!-- UI Overlay -->
    <div id="ui-overlay">
        <!-- Title -->
        <div id="scene-info" class="ui-panel info">
            <h2 id="scene-title">ðŸŒŠ Ocean Time Machine</h2>
            <p id="scene-description">Witness 50 years of ocean change through NASA Earth observations</p>
        </div>

        <!-- Instructions -->
        <div id="instructions" class="ui-panel">
            <p>ðŸ”´ Click glowing hotspots to explore data</p>
            <p class="controls-hint">ðŸŽ® Click year buttons to travel through time | Auto-play runs every 5 seconds</p>
        </div>

        <!-- Subtitle Display -->
        <div id="subtitle-display" class="ui-panel subtitle hidden">
            <p id="subtitle-text"></p>
        </div>
    </div>

    <!-- JavaScript Modules -->
    <script src="js/config.js"></script>
    <script src="js/audio-controller.js"></script>
    <script src="js/ui-manager.js"></script>
    <script src="js/animation-controller.js"></script>
    <script src="js/scene-manager.js"></script>
    <script src="js/earth-controller.js"></script>
    <script src="js/init.js"></script>
</body>
</html>